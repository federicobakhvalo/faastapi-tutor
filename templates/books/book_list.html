{% extends "base.html" %}


{% block content %}

<div class="grow w-full m-auto max-w-4xl flex flex-col my-2">
	{% if q %}
	<h2 class="text-xl font-semibold">
		Результаты поиска: "{{ q }}"
	</h2>
	{% else %}
	<h2 class="text-xl font-semibold">
		Все книги
	</h2>
	{% endif %}


	{% if books %}
	<div class="grid gap-4 grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 my-2 ">
		
		{% for book in books %}
		<div
			class=" border border-[#6e6e6e] overflow-hidden rounded-xl cursor-pointer bg-[#202020] hover:bg-[#2f2f2f] ">
			<div class="relative aspect-[3/4] overflow-hidden">
				<img src="{{book.cover_url}}" class="w-full h-full absolute inset-0 object-cover object-center">
				<a href="{% if book.amount > 0 %}/create_bookloan/?book_id={{ book.id }}{% else %}#{% endif %}">
					<button class="absolute left-1/2 -translate-x-1/2 max-w-[95%] cursor-pointer flex bottom-3 bg-[#00aff0] items-center justify-center rounded-lg px-4 py-2 text-sm font-medium text-white focus:outline-none
				        disabled:opacity-50 disabled:pointer-events-none" {% if book.amount < 1 %}disabled{% endif %}>
						Забронировать
					</button>
				</a>
			</div>
			<div class="flex flex-col p-2 items-center gap-0.5">
				<h2 class="text-xs font-semibold w-full overflow-hidden text-ellipsis text-nowrap text-center">
					{{book.bookname}}</h2>
				<div class="flex items-center gap-1 text-xs text-gray-400">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
						stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4">
						<circle cx="12" cy="7" r="4"></circle>
						<path d="M5.5 21a6.5 6.5 0 0 1 13 0"></path>
					</svg>
					<span>{{ book.author.name }}</span>
				</div>
				<h4 class="text-xs font-light ">
					Количество : {{book.amount}}
				</h4>
			</div>
		</div>
		{% endfor %}
	</div>
	{% else %}
	<h2 class="text-xl font-medium">Книги не найдены</h2>
	{% endif %}


	{% if pagination.is_paginated %}
	<div class="flex items-center justify-center gap-1 mt-6">

		<a  {% if pagination.has_prev %} href="?{% if q %}q={{ q }}&{% endif %}page={{ pagination.page - 1 }}" class="inline-flex h-9 w-9 items-center justify-center rounded-full
		           border border-[#303030] bg-[#191919] text-white
		           hover:bg-[#252525] transition" {% else %} class="inline-flex h-9 w-9 items-center justify-center rounded-full
		           border border-[#303030] bg-[#191919] text-white
		           opacity-40 pointer-events-none" {% endif %}>
			‹
		</a>
		
		
		<a {% if pagination.has_next %} href="?{% if q %}q={{ q }}&{% endif %}page={{ pagination.page + 1 }}" class="inline-flex h-9 w-9 items-center justify-center rounded-full
		           border border-[#303030] bg-[#191919] text-white
		           hover:bg-[#252525] transition" {% else %} class="inline-flex h-9 w-9 items-center justify-center rounded-full
		           border border-[#303030] bg-[#191919] text-white
		           opacity-40 pointer-events-none" {% endif %}>
			›
		</a>
		

	</div>
	{% endif %}




</div>


{% endblock %}